(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/blmx"],{6565:function(t,n,e){"use strict";var a={"uni-segmented-control":()=>e.e("components/uni-segmented-control/uni-segmented-control").then(e.bind(null,"0d15")),"z-table":()=>Promise.all([e.e("common/vendor"),e.e("components/z-table/z-table")]).then(e.bind(null,"c65d")),"uni-pagination":()=>e.e("components/uni-pagination/uni-pagination").then(e.bind(null,"ff8a"))},i=function(){var t=this,n=t.$createElement;t._self._c},o=[];e.d(n,"b",function(){return i}),e.d(n,"c",function(){return o}),e.d(n,"a",function(){return a})},"85e3":function(t,n,e){"use strict";(function(t){e("393a"),e("921b");a(e("66fd"));var n=a(e("b539"));function a(t){return t&&t.__esModule?t:{default:t}}t(n.default)}).call(this,e("6e42")["createPage"])},"8de2":function(t,n,e){"use strict";var a=e("ab56"),i=e.n(a);i.a},a3bf:function(t,n,e){"use strict";(function(t,a){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=e("12fe");function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var s=function(){return Promise.all([e.e("common/vendor"),e.e("components/z-table/z-table_v1")]).then(e.bind(null,"c62a"))},l=function(){return e.e("components/uni-pagination/uni-pagination").then(e.bind(null,"ff8a"))},u=function(){return e.e("components/uni-segmented-control/uni-segmented-control").then(e.bind(null,"0d15"))},r={props:{title:{type:String,default:"扫描明细"}},components:{zTable:s,uniPagination:l,uniSegmentedControl:u},computed:{xqsl:function(){var t=this.option.McQty1-this.option.McAqty1;return t}},data:function(){var n;return n={heightH:t.getSystemInfoSync().windowHeight,items:["扫描明细","备料扫描"],tabCurrent:0,tableData:[],tableColumns:[],tableKey:[],statusArr:[],current:1,total:100,pageSize:10,nowType:0,singleSelect:!1,option:new Object,result:"",result1:"",result2:""},o(n,"option",new Object),o(n,"scanData",new Object),o(n,"scanData2",new Object),o(n,"zkw",""),o(n,"psNum",0),o(n,"commitFlag",!0),n},onLoad:function(n){a("log",JSON.parse(n.data)," at pages\\index\\blmx.vue:163"),this.option=JSON.parse(n.data),(0,i.getMC02D1ByMclist)().then(function(t){a("log",t," at pages\\index\\blmx.vue:166")}),t.setNavigationBarTitle({title:this.title}),this.getGridTitleBlmx(),this.blmx()},methods:{onClickItem:function(t){this.tabCurrent!==t&&(this.tabCurrent=t)},rowClick:function(n){t.showToast({title:"".concat(JSON.stringify(n),"数据被点击"),icon:"none"}),a("log",JSON.stringify(n)," at pages\\index\\blmx.vue:186"),t.navigateTo({url:"blsm?data=".concat(JSON.stringify(n))})},change:function(t){a("log",t," at pages\\index\\blmx.vue:192"),this.current=t.current;var n={pageIndex:this.current,pageSum:"10"};this.blmx(n)},getGridTitleBlmx:function(){var t=this,n={title:"NO",width:80,key:"no"};(0,i.getGridTitleBlmx)().then(function(e){for(var a in t.tableColumns.push(n),e.data){t.tableKey.push(e.data[a].FieldCode);var i={title:e.data[a].DefaultLanguage,width:250,key:e.data[a].FieldCode,listenerClick:!0};t.tableColumns.push(i)}})},initData:function(){},blmx:function(){var t=this;this.tableData=[];this.current;(0,i.getMC02D1ByMclist)().then(function(n){t.total=n.pageSum,a("log",n," at pages\\index\\blmx.vue:229");for(var e=0,i=n.Data.length;e<i;e++){var o={};for(var s in o.no=e,n.Data[e])if(-1!=t.tableKey.indexOf(s))if("ScStatus"==s)for(var l in t.statusArr)n.Data[e][s]==t.statusArr[l].Enmcode&&(o[s]=t.statusArr[l].Enmvalue);else o[s]=n.Data[e][s];t.tableData.push(o)}a("log",t.tableData," at pages\\index\\blmx.vue:249")})},bottomJump:function(n){"login"==n?(t.removeStorageSync("user"),t.navigateTo({url:"../login/login"})):t.navigateTo({url:n})},scan:function(){var n=this;t.scanCode({success:function(t){a("log",JSON.stringify(t)," at pages\\index\\blmx.vue:269"),n.url="http://39.108.215.49:8009/html/2.html?res="+t.result,n.result=t.result}})},scan1:function(){var n=this;t.scanCode({success:function(e){n.result1=e.result,a("log",e.result,n.option.MtArea," at pages\\index\\blmx.vue:279"),e.result!=n.option.MtArea&&t.showToast({title:"库位不一致",icon:"none"})}})},scan2:function(){var n=this;t.scanCode({success:function(e){n.result2=e.result,(0,i.getBarnoInfo)({el_barno:e.result}).then(function(e){n.scanData2=e.DicResult,n.commitFlag=!1,a("log",e.DicResult," at pages\\index\\blmx.vue:298"),n.psNum=e.DicResult.mt_qty1,e.DicResult.el_no!=n.option.ElNo&&t.showToast({title:"该批号对应料号与出库计划不一致",icon:"none"}),a("log",e," at pages\\index\\blmx.vue:306"),n.scanData=e.DicResult,a("log",n.scanData," at pages\\index\\blmx.vue:308")})}})},commit:function(){var n=this.option.McQty1-this.option.McAqty1;a("log",n,this.psNum," at pages\\index\\blmx.vue:315"),a("log",this.scanData.mt_qty1," at pages\\index\\blmx.vue:316"),this.scanData.mt_qty1>n||this.scanData.mt_qty1>this.psNum?t.showToast({title:"备料数量过多",icon:"none"}):this.scanData.mt_qty1<=0&&t.showToast({title:"备料数量不能为0",icon:"none"}),a("log",this.option," at pages\\index\\blmx.vue:328"),a("log",this.option.McList," at pages\\index\\blmx.vue:329");var e={mc_list:this.option.McList,Qty:this.scanData2.mt_qty1,mt_area:this.result1,el_no:this.scanData2.el_no,pk_list:this.scanData2.pk_list,el_barno:this.result2,el_sno:this.scanData2.el_sno,lot_no:this.scanData2.lot_no};a("log",e," at pages\\index\\blmx.vue:340"),(0,i.InsertMC02D1)(e).then(function(t){a("log",t," at pages\\index\\blmx.vue:342")})}}};n.default=r}).call(this,e("6e42")["default"],e("0de9")["default"])},ab56:function(t,n,e){},b539:function(t,n,e){"use strict";e.r(n);var a=e("6565"),i=e("d90b");for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);e("8de2");var s,l=e("f0c5"),u=Object(l["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],s);n["default"]=u.exports},d90b:function(t,n,e){"use strict";e.r(n);var a=e("a3bf"),i=e.n(a);for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);n["default"]=i.a}},[["85e3","common/runtime","common/vendor"]]]);